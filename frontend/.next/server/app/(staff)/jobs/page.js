(()=>{var e={};e.id=329,e.ids=[329],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},4204:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),r(8323),r(7195),r(5866),r(8337);var s=r(3191),a=r(8716),n=r(7922),o=r.n(n),i=r(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d=["",{children:["(staff)",{children:["jobs",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8323)),"/home/hirwa/Desktop/PROJECTS/E-garage/frontend/app/(staff)/jobs/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,7195)),"/home/hirwa/Desktop/PROJECTS/E-garage/frontend/app/(staff)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,8337)),"/home/hirwa/Desktop/PROJECTS/E-garage/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/hirwa/Desktop/PROJECTS/E-garage/frontend/app/(staff)/jobs/page.tsx"],u="/(staff)/jobs/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(staff)/jobs/page",pathname:"/jobs",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6106:(e,t,r)=>{Promise.resolve().then(r.bind(r,8559))},9990:(e,t,r)=>{Promise.resolve().then(r.bind(r,9941)),Promise.resolve().then(r.bind(r,381))},760:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},8559:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(326),a=r(7577),n=r(5047),o=r(9941),i=r(6824),l=r(8196);function d(){let{user:e}=(0,o.a)();(0,n.useRouter)();let[t,r]=(0,a.useState)(""),[d,c]=(0,a.useState)(""),[u,p]=(0,a.useState)(""),[x,m]=(0,a.useState)([]),[h,g]=(0,a.useState)(!0),[f,b]=(0,a.useState)();async function v(){try{g(!0),b(void 0);let e=new URLSearchParams;t&&e.set("q",t.trim()),d&&e.set("status",d),u&&e.set("payment",u);let{data:r}=await i.Z.get("/clients"+(e.toString()?`?${e.toString()}`:"")),s=Array.isArray(r)?r:r?.items||[];m(s)}catch(e){b(e?.response?.data?.message||"Failed to load jobs")}finally{g(!1)}}return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[s.jsx("input",{value:t,onChange:e=>r(e.target.value),placeholder:"Search name/plate/make...",className:"input max-w-xs"}),(0,s.jsxs)("select",{value:d,onChange:e=>c(e.target.value),className:"select",children:[s.jsx("option",{value:"",children:"All status"}),s.jsx("option",{children:"pending"}),s.jsx("option",{children:"repairing"}),s.jsx("option",{children:"completed"})]}),(0,s.jsxs)("select",{value:u,onChange:e=>p(e.target.value),className:"select",children:[s.jsx("option",{value:"",children:"All payments"}),s.jsx("option",{children:"unpaid"}),s.jsx("option",{children:"paid"})]}),s.jsx("button",{onClick:v,className:"btn",children:"Filter"})]}),f&&s.jsx("div",{className:"rounded-lg border border-red-500/30 bg-red-500/10 p-3 text-sm text-red-300",children:f}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3","aria-live":"polite",children:[h&&!f&&Array.from({length:6}).map((e,t)=>(0,s.jsxs)("div",{className:"card h-[180px] animate-pulse space-y-3",children:[s.jsx("div",{className:"h-5 w-40 rounded bg-slate-700/40"}),s.jsx("div",{className:"h-4 w-56 rounded bg-slate-700/30"}),s.jsx("div",{className:"h-4 w-28 rounded bg-slate-700/20"}),s.jsx("div",{className:"h-8 w-32 rounded bg-slate-700/20"})]},t)),!h&&!f&&x.map(e=>s.jsx(l.Z,{job:e},e._id)),!h&&!f&&0===x.length&&s.jsx("div",{className:"col-span-full text-slate-500",children:"No jobs found."})]})]})}},3303:(e,t,r)=>{"use strict";r.d(t,{O:()=>d,_:()=>c});var s=r(326);let a=(...e)=>e.filter(Boolean).join(" "),n=e=>String(e||"").trim().toLowerCase(),o=e=>String(e||"").replace(/[-_]/g," ").replace(/\b\w/g,e=>e.toUpperCase()),i={sm:"text-[10px] px-2 py-0.5",md:"text-xs px-2.5 py-1",lg:"text-sm px-3 py-1.5"};function l({className:e=""}){return s.jsx("span",{className:a("h-1.5 w-1.5 rounded-full",e)})}function d({value:e,size:t="md",className:r=""}){let d=n(e),c={pending:{bg:"bg-amber-500/15",text:"text-amber-300",dot:"bg-amber-400",icon:(0,s.jsxs)("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("circle",{cx:"12",cy:"12",r:"9"}),s.jsx("path",{d:"M12 7v5l3 3"})]})},repairing:{bg:"bg-sky-500/15",text:"text-sky-300",dot:"bg-sky-400",icon:(0,s.jsxs)("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M3 21l3-3 6-6"}),s.jsx("path",{d:"M14 7l-1 1 3 3 1-1a3 3 0 10-3-3z"})]})},completed:{bg:"bg-emerald-500/15",text:"text-emerald-300",dot:"bg-emerald-400",icon:s.jsx("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{d:"M20 6L9 17l-5-5"})})}}[d]||{bg:"bg-slate-700/40",text:"text-slate-300",dot:"bg-slate-400"},u=o(e||"Unknown");return(0,s.jsxs)("span",{role:"status",title:`Status: ${u}`,"data-kind":"status","data-value":d||"unknown",className:a("inline-flex items-center gap-1.5 rounded-md ring-1 ring-white/10",c.bg,c.text,i[t],r),children:[s.jsx(l,{className:c.dot}),c.icon,s.jsx("span",{children:u})]})}function c({value:e,size:t="md",className:r=""}){let d=n(e),c={unpaid:{bg:"bg-rose-500/15",text:"text-rose-300",dot:"bg-rose-400",icon:(0,s.jsxs)("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M6 6l12 12"}),s.jsx("path",{d:"M12 3v18"})]})},paid:{bg:"bg-emerald-500/15",text:"text-emerald-300",dot:"bg-emerald-400",icon:s.jsx("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{d:"M20 6L9 17l-5-5"})})}}[d]||{bg:"bg-slate-700/40",text:"text-slate-300",dot:"bg-slate-400"},u=o(e||"Unknown");return(0,s.jsxs)("span",{role:"status",title:`Payment: ${u}`,"data-kind":"payment","data-value":d||"unknown",className:a("inline-flex items-center gap-1.5 rounded-md ring-1 ring-white/10",c.bg,c.text,i[t],r),children:[s.jsx(l,{className:c.dot}),c.icon,s.jsx("span",{children:u})]})}},8196:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(326),a=r(434),n=r(3303);function o({job:e,hrefBase:t="/jobs"}){let r=(e?.names||"Unknown Client").toString(),o=[e?.carMake,e?.carType].filter(Boolean).join(" • "),l=e?.plateNumber||"—",d=e?.issues||"-",c=e?._id?String(e._id):"",u="http://localhost:5000",p=c&&u?`${u}/clients/${c}/pdf`:"#",x=c?`${t}/${c}`:"#",m=!c;return(0,s.jsxs)("article",{className:"group card relative min-h-[180px] overflow-hidden p-5 md:p-6 transition hover:-translate-y-0.5 hover:border-brand-500/40 focus-within:border-brand-500/60","data-status":e?.status,"data-payment":e?.payment,children:[s.jsx("div",{className:"pointer-events-none absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-brand-500/40 via-sky-400/30 to-emerald-400/30"}),(0,s.jsxs)("div",{className:"mb-3 grid grid-cols-[auto_1fr] items-center gap-x-3 gap-y-2 md:mb-4",children:[s.jsx(i,{name:r,className:"row-span-2"}),s.jsx("div",{className:"min-w-0 leading-tight col-start-2",children:s.jsx("span",{className:"block max-w-full text-base font-semibold md:text-lg line-clamp-2 md:line-clamp-1 md:truncate",title:r,children:r})}),(0,s.jsxs)("div",{className:"col-start-2 flex flex-wrap gap-2",children:[s.jsx(n.O,{value:e?.status}),s.jsx(n._,{value:e?.payment})]})]}),(0,s.jsxs)("div",{className:"min-w-0 text-base text-slate-200",children:[s.jsx("span",{className:"truncate",children:o||"Vehicle —"})," ","•"," ",s.jsx("span",{className:"text-slate-400",title:"Plate number",children:l})]}),s.jsx("p",{className:"mt-2 line-clamp-3 text-sm text-slate-300",title:String(d),children:d}),(0,s.jsxs)("div",{className:"mt-4 flex flex-wrap gap-3 md:gap-4",children:[(0,s.jsxs)(a.default,{href:x,className:`inline-flex items-center gap-1.5 rounded-lg px-4 py-2 text-base transition focus:outline-none focus:ring-2 focus:ring-brand-500/40 ${m?"bg-slate-700/60 cursor-not-allowed":"bg-brand-600 hover:bg-brand-700"}`,"aria-disabled":m,tabIndex:m?-1:0,children:[(0,s.jsxs)("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M5 12h14"}),s.jsx("path",{d:"M12 5l7 7-7 7"})]}),"Open"]}),(0,s.jsxs)("a",{href:p,className:"inline-flex items-center gap-1.5 rounded-lg bg-slate-800 px-4 py-2 text-base transition hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-brand-500/40",target:"_blank",rel:"noreferrer noopener","aria-disabled":!c||!u,onClick:e=>{c&&u||e.preventDefault()},children:[(0,s.jsxs)("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),s.jsx("path",{d:"M14 2v6h6"}),s.jsx("path",{d:"M12 18v-6"}),s.jsx("path",{d:"M9 15h6"})]}),"Export PDF"]})]}),s.jsx("div",{className:"pointer-events-none absolute -inset-1 opacity-0 transition-opacity duration-500 group-hover:opacity-100","aria-hidden":!0,children:s.jsx("div",{className:"absolute -top-24 left-0 h-24 w-full bg-gradient-to-r from-white/5 to-transparent blur-xl"})})]})}function i({name:e,className:t}){let r=e.split(/\s+/).filter(Boolean).slice(0,2).map(e=>e[0]?.toUpperCase()).join("")||"?";return s.jsx("div",{className:`grid h-12 w-12 place-items-center rounded-full bg-brand-500/15 text-brand-400 ring-1 ring-white/10 ${t||""}`,children:s.jsx("span",{className:"text-base font-semibold",children:r})})}},6824:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(4099);let a="http://localhost:5000";a||console.error("❌ Missing NEXT_PUBLIC_API_URL in .env.local");let n=s.Z.create({baseURL:a||"/"});n.interceptors.request.use(e=>e);let o=n},9941:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>c,a:()=>u});var s=r(326),a=r(7577),n=r(6824),o=r(381),i=r(8201);let l=(0,a.createContext)(null);function d(e){return["admin","staff","client"].includes(e)?e:(console.warn(`Invalid role "${e}" received; defaulting to "client"`),"client")}function c({children:e}){let[t,r]=(0,a.useState)(null),[c,u]=(0,a.useState)(!0);async function p(e,t){try{let{data:s}=await n.Z.post("/auth/login",{email:e,password:t});if(!s?.token)throw Error("Invalid API response: missing token");let a=(0,i.o)(s.token);if(!a.email||!a.role)throw Error("Invalid token payload: missing email or role");let l=d(a.role),c=a.verified??!0;s.role&&s.role!==a.role&&console.warn(`API role "${s.role}" does not match token role "${a.role}"`),localStorage.setItem("token",s.token);let u={email:a.email,role:l,verified:c};localStorage.setItem("user",JSON.stringify(u)),r(u),c||o.ZP.error("Please verify your email first.")}catch(e){console.error("Login error:",e),o.ZP.error("Invalid credentials")}}async function x(e,t){try{let{data:s}=await n.Z.post("/auth/register",{email:e,password:t});if(!s?.token)throw Error("Invalid API response: missing token");let a=(0,i.o)(s.token);if(!a.email||!a.role)throw Error("Invalid token payload: missing email or role");let l=d(a.role),c=a.verified??!0;s.role&&s.role!==a.role&&console.warn(`API role "${s.role}" does not match token role "${a.role}"`),localStorage.setItem("token",s.token);let u={email:a.email,role:l,verified:c};localStorage.setItem("user",JSON.stringify(u)),r(u),o.ZP.success("Account created.")}catch(e){console.error("Signup error:",e),o.ZP.error("Signup failed")}}return s.jsx(l.Provider,{value:{user:t,loading:c,login:p,signup:x,logout:function(){localStorage.clear(),r(null),window.location.href="/"}},children:e})}function u(){let e=(0,a.useContext)(l);if(!e)throw Error("useAuth outside provider");return e}},5047:(e,t,r)=>{"use strict";var s=r(7389);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},8323:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>o,__esModule:()=>n,default:()=>i});var s=r(8570);let a=(0,s.createProxy)(String.raw`/home/hirwa/Desktop/PROJECTS/E-garage/frontend/app/(staff)/jobs/page.tsx`),{__esModule:n,$$typeof:o}=a;a.default;let i=(0,s.createProxy)(String.raw`/home/hirwa/Desktop/PROJECTS/E-garage/frontend/app/(staff)/jobs/page.tsx#default`)},8337:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u,metadata:()=>c});var s=r(9510);r(7272);var a=r(8570);let n=(0,a.createProxy)(String.raw`/home/hirwa/Desktop/PROJECTS/E-garage/frontend/lib/auth.tsx`),{__esModule:o,$$typeof:i}=n;n.default;let l=(0,a.createProxy)(String.raw`/home/hirwa/Desktop/PROJECTS/E-garage/frontend/lib/auth.tsx#AuthProvider`);(0,a.createProxy)(String.raw`/home/hirwa/Desktop/PROJECTS/E-garage/frontend/lib/auth.tsx#useAuth`);var d=r(9125);let c={title:"E-Garage",description:"Garage Management"};function u({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{children:(0,s.jsxs)(l,{children:[e,s.jsx(d.x7,{position:"top-right",toastOptions:{style:{background:"#1f2937",color:"white"}}})]})})})}},7272:()=>{},1135:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=function(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=function e(t){var r,s,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t){if(Array.isArray(t)){var n=t.length;for(r=0;r<n;r++)t[r]&&(s=e(t[r]))&&(a&&(a+=" "),a+=s)}else for(s in t)t[s]&&(a&&(a+=" "),a+=s)}return a}(e))&&(s&&(s+=" "),s+=t);return s}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[300,434,424],()=>r(4204));module.exports=s})();